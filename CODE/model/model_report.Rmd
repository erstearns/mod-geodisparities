---
title: "Model run report"
author: "Erin R Stearns"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

#To-do
# - figure out how to use dynamic YAML code to change title to model name
# - test out plotting of KNN object once have interwebs again and can load RGraphviz
# - in tmap of modeled rates, update name of spatial object representing model output data
# - add titles to tmaps
# - figure out how to get RMarkdown to access global objects in environment -- currently not recognizing anything, e.g. model_knn

# Model inputs

## View INLA object
**Summary of INLA object:**

```{r, echo=FALSE}
summary(model_knn)
#plot(model_knn, coords = coordinates(as(spatdata_sf, 'Spatial')))
```

**Interpretation:**
+ *n* is the size of the graph (e.g. the number of areal units)
+ *nnbs* are the number of neighbors for each node.
+ *ncc* is about connected components of the graph and this tells us how many are in the list (e.g. only 1)
+ The summary (names) tells us the possible number of neighbors per node
+ The summary (count) tells us how many counties have each number of neighbors.
+ **Note** that the `symmetry = T` above is what forced some counties to have > 4 neighbors__


# Observed vs Modeled 

## Raw (pooled) rates vs modeled rates
```{r, echo=FALSE}
#observed/raw input data
raw_outcome <- tm_shape(spatdata_sp) +
  tm_fill('Observed PTB',
          style = 'quantile') +
  tm_borders()

#modeled rate data
# mod_outcome <- tm_shape(outdata_sp) +
#   tm_fill('rawptb',
#           style = 'quantile') +
#   tm_borders()
# 
# #side by side
# tmap_arrange(raw_outcome, mod_outcome)

```


